var createLRU=k=>{var{max:v,onEviction:t}=k;if(!(Number.isInteger(v)&&v>0))throw new TypeError("`max` must be a positive integer");var u=0,y=0,d=0,b=[],h=new Map,l=new Array(v).fill(void 0),f=new Array(v).fill(void 0),m=new Array(v).fill(0),i=new Array(v).fill(0),o=(e,r)=>{if(e!==d){var n=m[e],s=i[e];e===y?y=n:(r==="get"||s!==0)&&(m[s]=n),n!==0&&(i[n]=s),m[d]=e,i[e]=d,m[e]=0,d=e}},K=()=>{var e=y,r=l[e];return t==null||t(r,f[e]),h.delete(r),l[e]=void 0,f[e]=void 0,y=m[e],y!==0&&(i[y]=0),u--,u===0&&(y=d=0),b.push(e),e};return{set(e,r){if(e!==void 0){var n=h.get(e);n===void 0?(n=u===v?K():b.length>0?b.pop():u,h.set(e,n),l[n]=e,u++):t==null||t(e,f[n]),f[n]=r,u===1?y=d=n:o(n,"set")}},get(e){var r=h.get(e);if(r!==void 0)return r!==d&&o(r,"get"),f[r]},peek:e=>{var r=h.get(e);return r!==void 0?f[r]:void 0},has:e=>h.has(e),*keys(){for(var e=d,r=0;r<u;r++)yield l[e],e=i[e]},*values(){for(var e=d,r=0;r<u;r++)yield f[e],e=i[e]},*entries(){for(var e=d,r=0;r<u;r++)yield[l[e],f[e]],e=i[e]},forEach:e=>{for(var r=d,n=0;n<u;n++){var s=l[r],g=f[r];e(g,s),r=i[r]}},delete(e){var r=h.get(e);if(r===void 0)return!1;t==null||t(e,f[r]),h.delete(e),b.push(r),l[r]=void 0,f[r]=void 0;var n=i[r],s=m[r];return n!==0&&(m[n]=s),s!==0&&(i[s]=n),r===y&&(y=s),r===d&&(d=n),u--,!0},evict:e=>{for(var r=Math.min(e,u);r>0;)K(),r--},clear(){for(var e of h.values())t==null||t(l[e],f[e]);h.clear(),l.fill(void 0),f.fill(void 0),b=[],u=0,y=d=0},resize:e=>{if(!(Number.isInteger(e)&&e>0))throw new TypeError("`max` must be a positive integer");if(e!==v){if(e<v){for(var r=d,n=Math.min(u,e),s=u-n,g=new Array(e),A=new Array(e),I=new Array(e),V=new Array(e),a=1;a<=s;a++)t==null||t(l[a],f[a]);for(var a=n-1;a>=0;a--)g[a]=l[r],A[a]=f[r],I[a]=a+1,V[a]=a-1,h.set(g[a],a),r=i[r];y=0,d=n-1,u=n,l.length=e,f.length=e,m.length=e,i.length=e;for(var a=0;a<n;a++)l[a]=g[a],f[a]=A[a],m[a]=I[a],i[a]=V[a];b=[];for(var a=n;a<e;a++)b.push(a)}else{var p=e-v;l.push(...new Array(p).fill(void 0)),f.push(...new Array(p).fill(void 0)),m.push(...new Array(p).fill(0)),i.push(...new Array(p).fill(0))}v=e}},get max(){return v},get size(){return u},get available(){return v-u}}};
